<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google NLP API Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 900px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }
    h1 { color: #333; }
    textarea {
      width: 100%;
      min-height: 100px;
      padding: 10px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      margin: 10px 0;
    }
    button {
      background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      margin: 10px 5px 10px 0;
    }
    button:hover { opacity: 0.9; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    .result {
      background: #f5f5f5;
      padding: 15px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #4285f4;
    }
    .error {
      background: #fee;
      border-left-color: #dc2626;
      color: #dc2626;
    }
    .success {
      background: #d1fae5;
      border-left-color: #059669;
    }
    pre {
      background: #f9f9f9;
      padding: 10px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 12px;
    }
  </style>
</head>
<body>

<div class="container">
  <h1>ğŸ”¬ Google NLP API Test</h1>
  
  <div>
    <label><strong>API Key:</strong></label>
    <input type="text" id="apiKey" value="AIzaSyDQSjNnZFF5rgYZMLROHMdJv1FhMVQwVVQ" style="width: 100%; padding: 8px; margin: 10px 0; border: 2px solid #ddd; border-radius: 4px;">
  </div>
  
  <div>
    <label><strong>Test Metni (TÃ¼rkÃ§e CPR):</strong></label>
    <textarea id="inputText">AkÅŸam yemeÄŸinden bir saat sonra baÅŸlayan ÅŸiddetli karÄ±n ÅŸiÅŸliÄŸi nedeniyle geceleri uyuyamayan hastalarÄ±nÄ±z iÃ§in proton pompa inhibisyonu yapan Marpazol, sindirim sisteminde fizyolojik kontrol daha etkilidir.</textarea>
  </div>
  
  <button id="testSyntax">ğŸ§ª Syntax Analysis (SÃ¶zdizimi)</button>
  <button id="testEntities">ğŸ·ï¸ Entity Recognition (VarlÄ±k Tespiti)</button>
  <button id="testSentiment">ğŸ˜Š Sentiment Analysis (Duygu)</button>
  
  <div id="result"></div>
</div>

<script>
  const apiKeyInput = document.getElementById('apiKey');
  const inputText = document.getElementById('inputText');
  const resultDiv = document.getElementById('result');
  
  // ============================================
  // SYNTAX ANALYSIS
  // ============================================
  
  document.getElementById('testSyntax').addEventListener('click', async () => {
    const apiKey = apiKeyInput.value;
    const text = inputText.value;
    
    resultDiv.innerHTML = '<div class="result">â³ Syntax analizi yapÄ±lÄ±yor...</div>';
    
    try {
      const response = await fetch(
        `https://language.googleapis.com/v1/documents:analyzeSyntax?key=${apiKey}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            document: {
              type: 'PLAIN_TEXT',
              language: 'tr',
              content: text
            },
            encodingType: 'UTF8'
          })
        }
      );
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(JSON.stringify(error, null, 2));
      }
      
      const data = await response.json();
      
      // Token'larÄ± gÃ¶ster
      let tokensHTML = '<h3>ğŸ”¤ Kelimeler ve TÃ¼rleri:</h3><table border="1" style="width:100%; border-collapse: collapse;"><tr><th>Kelime</th><th>TÃ¼r</th><th>BaÄŸÄ±mlÄ±lÄ±k</th></tr>';
      
      data.tokens.forEach(token => {
        tokensHTML += `<tr>
          <td>${token.text.content}</td>
          <td>${token.partOfSpeech.tag}</td>
          <td>${token.dependencyEdge.label}</td>
        </tr>`;
      });
      
      tokensHTML += '</table>';
      
      resultDiv.innerHTML = `
        <div class="result success">
          <strong>âœ… BaÅŸarÄ±lÄ±!</strong>
          ${tokensHTML}
          <details style="margin-top: 20px;">
            <summary style="cursor: pointer; font-weight: bold;">ğŸ“‹ Tam YanÄ±t (JSON)</summary>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          </details>
        </div>
      `;
      
    } catch (error) {
      resultDiv.innerHTML = `
        <div class="result error">
          <strong>âŒ Hata!</strong>
          <pre>${error.message}</pre>
        </div>
      `;
    }
  });
  
  // ============================================
  // ENTITY RECOGNITION
  // ============================================
  
  document.getElementById('testEntities').addEventListener('click', async () => {
    const apiKey = apiKeyInput.value;
    const text = inputText.value;
    
    resultDiv.innerHTML = '<div class="result">â³ VarlÄ±k tespiti yapÄ±lÄ±yor...</div>';
    
    try {
      const response = await fetch(
        `https://language.googleapis.com/v1/documents:analyzeEntities?key=${apiKey}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            document: {
              type: 'PLAIN_TEXT',
              language: 'tr',
              content: text
            },
            encodingType: 'UTF8'
          })
        }
      );
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(JSON.stringify(error, null, 2));
      }
      
      const data = await response.json();
      
      // Entity'leri gÃ¶ster
      let entitiesHTML = '<h3>ğŸ·ï¸ Tespit Edilen VarlÄ±klar:</h3><table border="1" style="width:100%; border-collapse: collapse;"><tr><th>VarlÄ±k</th><th>TÃ¼r</th><th>Ã–nem</th></tr>';
      
      data.entities.forEach(entity => {
        entitiesHTML += `<tr>
          <td><strong>${entity.name}</strong></td>
          <td>${entity.type}</td>
          <td>${(entity.salience * 100).toFixed(1)}%</td>
        </tr>`;
      });
      
      entitiesHTML += '</table>';
      
      resultDiv.innerHTML = `
        <div class="result success">
          <strong>âœ… BaÅŸarÄ±lÄ±!</strong>
          ${entitiesHTML}
          <details style="margin-top: 20px;">
            <summary style="cursor: pointer; font-weight: bold;">ğŸ“‹ Tam YanÄ±t (JSON)</summary>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          </details>
        </div>
      `;
      
    } catch (error) {
      resultDiv.innerHTML = `
        <div class="result error">
          <strong>âŒ Hata!</strong>
          <pre>${error.message}</pre>
        </div>
      `;
    }
  });
  
  // ============================================
  // SENTIMENT ANALYSIS
  // ============================================
  
  document.getElementById('testSentiment').addEventListener('click', async () => {
    const apiKey = apiKeyInput.value;
    const text = inputText.value;
    
    resultDiv.innerHTML = '<div class="result">â³ Duygu analizi yapÄ±lÄ±yor...</div>';
    
    try {
      const response = await fetch(
        `https://language.googleapis.com/v1/documents:analyzeSentiment?key=${apiKey}`,
        {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            document: {
              type: 'PLAIN_TEXT',
              language: 'tr',
              content: text
            },
            encodingType: 'UTF8'
          })
        }
      );
      
      if (!response.ok) {
        const error = await response.json();
        throw new Error(JSON.stringify(error, null, 2));
      }
      
      const data = await response.json();
      
      const score = data.documentSentiment.score;
      const magnitude = data.documentSentiment.magnitude;
      
      let sentiment = '';
      if (score > 0.25) sentiment = 'ğŸ˜Š Pozitif';
      else if (score < -0.25) sentiment = 'ğŸ˜ Negatif';
      else sentiment = 'ğŸ˜ NÃ¶tr';
      
      resultDiv.innerHTML = `
        <div class="result success">
          <strong>âœ… BaÅŸarÄ±lÄ±!</strong>
          <h3>ğŸ˜Š Duygu Analizi:</h3>
          <p><strong>Duygu:</strong> ${sentiment}</p>
          <p><strong>Skor:</strong> ${score.toFixed(2)} (-1: Negatif, +1: Pozitif)</p>
          <p><strong>BÃ¼yÃ¼klÃ¼k:</strong> ${magnitude.toFixed(2)}</p>
          <details style="margin-top: 20px;">
            <summary style="cursor: pointer; font-weight: bold;">ğŸ“‹ Tam YanÄ±t (JSON)</summary>
            <pre>${JSON.stringify(data, null, 2)}</pre>
          </details>
        </div>
      `;
      
    } catch (error) {
      resultDiv.innerHTML = `
        <div class="result error">
          <strong>âŒ Hata!</strong>
          <pre>${error.message}</pre>
        </div>
      `;
    }
  });
</script>

</body>
</html>
